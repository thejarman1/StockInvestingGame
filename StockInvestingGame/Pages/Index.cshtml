@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}
@Html.AntiForgeryToken()


<div class="text-center">
    <h1 class="display-4">Stock Investing</h1>
    <h3 class="display-8">Practice your investing skills!</h3>
    
    <form id="form1" runat="server">
        <p>You are given $10,000 to invest in the stock market. You are placed on a random day, at least six months in the past. You are able to buy, sell, or hold for a total of 7 days. Good luck!</p>
        <br />

        <p>Ticker Symbol</p>
        <input id="tickerSymbol" type="text" value="E.G. AAPL"/>
        <br />
        <br />
        <input type="button" id="btnGetStocks" value="Display Stocks" />
    </form>

    <div id="result"></div>
 
    <br />

     <a asp-action="Buy" class="btn btn-primary" style="width: 150px">Buy</a>
     <a asp-action="Sell" class="btn btn-primary" style="width: 150px">Sell</a>
     <a asp-action="Index" class="btn btn-primary" style="width: 150px">Hold</a>
</div>

@section Scripts
    {
    <script type="text/javascript">

        $("#btnGetStocks").click(function() {
            var tickerSymbol = $('#tickerSymbol').val();
            $.ajax({
                type: "POST",
                url: "/Index?handler=GetStocks",
                data: { "value": tickerSymbol },
                contentType: 'application/x-www-form-urlencoded',
                dataType: "json",
                headers:
                {
                    "RequestVerificationToken": $('input:hidden[name="__RequestVerificationToken"]').val()
                },
                success: function(message) {
                    document.getElementById("result").innerHTML = message;
                }
            });

        });
    </script>
}
